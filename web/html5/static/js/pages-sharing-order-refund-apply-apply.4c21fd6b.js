(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sharing-order-refund-apply-apply"],{"3e08":function(t,e,i){"use strict";i.r(e);var a=i("b9a8"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},"5ade":function(t,e,i){"use strict";var a=i("69d0"),o=i.n(a);o.a},"69d0":function(t,e,i){var a=i("e9b5");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("49536bbb",a,!0,{sourceMap:!1,shadowMode:!1})},"6fa3":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.detail.order_goods_id?i("v-uni-view",{staticClass:"containers p-bottom"},[i("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.onSubmit.apply(void 0,arguments)}}},[i("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.onGoodsDetail.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit","data-id":t.detail.goods_id}},[i("v-uni-view",{staticClass:"goods-detail b-f dis-flex flex-dir-row"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{staticClass:"goods-image",attrs:{src:t.detail.image.file_path}})],1),i("v-uni-view",{staticClass:"right dis-flex flex-box flex-dir-column flex-x-around"},[i("v-uni-view",{staticClass:"goods-name"},[i("v-uni-text",{staticClass:"twolist-hidden"},[t._v(t._s(t.detail.goods_name))])],1),i("v-uni-view",{staticClass:"dis-flex col-9 f-24"},[i("v-uni-view",{staticClass:"flex-box"},[t._v(t._s(t.detail.goods_attr))]),i("v-uni-text",{staticClass:"t-r"},[t._v("×"+t._s(t.detail.total_num))])],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"row-service b-f m-top20"},[i("v-uni-view",{staticClass:"row-title"},[t._v(t._s(t.$t("pintuandingdan.fuwuleixing")))]),i("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.onSwitchService.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"service-switch dis-flex"},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit","data-type":"10"}},[i("v-uni-view",{class:"switch-item "+(10==t.serviceType?"active":"")},[t._v("退货退款")])],1),i("v-uni-button",{staticClass:"btn-normal dis-flex",attrs:{formType:"submit","data-type":"20"}},[i("v-uni-view",{class:"switch-item "+(20==t.serviceType?"active":"")},[t._v("换货")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"row-textarea b-f m-top20"},[i("v-uni-view",{staticClass:"row-title"},[t._v(t._s(t.$t("pintuandingdan.shenqingyuanyin")))]),i("v-uni-view",{staticClass:"content"},[i("v-uni-textarea",{attrs:{name:"content",maxlength:"2000",placeholder:t.$t("pintuandingdan.shenqingyuanyintxt"),placeholderStyle:"color:#ccc"}})],1)],1),10==t.serviceType?i("v-uni-view",{staticClass:"row-money b-f m-top20 dis-flex"},[i("v-uni-view",{staticClass:"row-title"},[t._v(t._s(t.$t("pintuandingdan.tuikuanjine")))]),i("v-uni-view",{staticClass:"money col-m"},[t._v("￥"+t._s(t.detail.total_pay_price))])],1):t._e(),i("v-uni-view",{staticClass:"row-voucher b-f m-top20"},[i("v-uni-view",{staticClass:"row-title"},[t._v(t._s(t.$t("pintuandingdan.pinzhengs")))]),i("v-uni-view",{staticClass:"image-list"},[t._l(t.imageList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"image-preview"},[i("v-uni-text",{staticClass:"image-delete iconfont icon-shanchu",attrs:{"data-index":t.index,"data-image-index":a},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.deleteImage.apply(void 0,arguments)}}}),i("v-uni-image",{attrs:{mode:"aspectFill",src:e}})],1)})),t.imageList.length<6?i("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[i("v-uni-view",{staticClass:"image-picker dis-flex flex-dir-column flex-x-center flex-y-center"},[i("v-uni-text",{staticClass:"choose__icon iconfont icon-tubiao_xiangji"}),i("v-uni-text",{staticClass:"choose__text"},[t._v(t._s(t.$t("pintuandingdan.sctp")))])],1)],1)],1):t._e()],2)],1),i("v-uni-view",{staticClass:"flow-fixed-footer b-f"},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[i("v-uni-view",{staticClass:"flow-btn f-32"},[t._v(t._s(t.$t("pintuandingdan.qrtj")))])],1)],1)],1)],1):t._e()},n=[]},b9a8:function(t,e,i){"use strict";i("99af"),i("4160"),i("a434"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=getApp(),o={data:function(){return{order_goods_id:null,detail:{order_goods_id:"",goods_id:"",image:{file_path:""},goods_name:"",goods_attr:"",total_num:"",total_pay_price:""},imageList:[],serviceType:10,imageIndex:0,imagePath:""}},onLoad:function(t){this.order_goods_id=t.order_goods_id,this.getGoodsDetail()},methods:{disable:!1,getGoodsDetail:function(){var t=this;a.globalData._get("sharing.refund/apply",{order_goods_id:this.order_goods_id},(function(e){t.setData(e.data)}))},onSwitchService:function(t){a.globalData.saveFormId(t.detail.formId),this.setData({serviceType:t.detail.target.dataset.type})},onGoodsDetail:function(t){a.globalData.saveFormId(t.detail.formId),uni.navigateTo({url:"../../../goods/index?goods_id="+t.detail.target.dataset.id})},chooseImage:function(t){var e=this,i=(t.currentTarget.dataset.index,e.imageList);a.globalData.saveFormId(t.detail.formId),uni.chooseImage({count:6-i.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.setData({imageList:i.concat(t.tempFilePaths)})}})},deleteImage:function(t){var e=t.currentTarget.dataset,i=this.imageList;i.splice(e.imageIndex,1),this.setData({imageList:i})},onSubmit:function(t){var e=this;if(!t.detail.value.content)return a.globalData.showError(e.$t("pintuandingdan.shenqingyuanyintxts")),!1;if(!0===e.disable)return!1;e.disable=!0,uni.showLoading({title:e.$t("pintuandingdan.chuli"),mask:!0});var i={order_goods_id:e.order_goods_id,type:e.serviceType,content:t.detail.value.content},o=function(t){console.log("fromPostCall"),a.globalData._post_form("sharing.refund/apply",t,(function(t){1===t.code?a.globalData.showSuccess(t.msg,(function(){uni.navigateTo({url:"../index"})})):a.globalData.showError(t.msg)}),!1,(function(){uni.hideLoading(),e.disable=!1}))},n=e.imageList.length;n>0?e.uploadFile(n,o,i):o(i)},uploadFile:function(t,e,i){var o=[],n=0;this.imageList.forEach((function(s,d){uni.uploadFile({url:a.globalData.api_root+"upload/image",filePath:s,name:"iFile",formData:{wxapp_id:a.globalData.getWxappId(),token:uni.getStorageSync("token")},success:function(t){var e="object"===typeof t.data?t.data:JSON.parse(t.data);1===e.code&&(o[d]=e.data.file_id)},complete:function(){n++,t===n&&(console.log("upload complete"),i["images"]=o,e&&e(i))}})}))}}};e.default=o},e9b5:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'.container[data-v-b50e7bd2]{font-size:%?28?%}.row-title[data-v-b50e7bd2]{color:#888;margin-bottom:%?20?%}.goods-detail[data-v-b50e7bd2]{padding:%?24?% %?20?%}.goods-detail .left .goods-image[data-v-b50e7bd2]{display:block;width:%?150?%;height:%?150?%}.goods-detail .right[data-v-b50e7bd2]{padding-left:%?20?%}\n\n/* 服务类型 */.row-service[data-v-b50e7bd2]{padding:%?24?% %?20?%}.service-switch .switch-item[data-v-b50e7bd2]{height:%?38?%;line-height:%?38?%;padding:%?10?% %?30?%;margin-right:%?25?%;border-radius:%?10?%;border:1px solid #b1b1b1;color:#888}.service-switch .switch-item.active[data-v-b50e7bd2]{color:#fc1e56;border:1px solid #fc1e56}\n\n/* 申请原因 */.row-textarea[data-v-b50e7bd2]{padding:%?24?% %?20?%}.row-textarea uni-textarea[data-v-b50e7bd2]{width:100%;height:%?220?%;padding:%?12?%;border:%?1?% solid #e8e8e8;border-radius:%?5?%;box-sizing:border-box}\n\n/* 退款金额 */.row-money[data-v-b50e7bd2]{padding:%?24?% %?20?%}.row-money .row-title[data-v-b50e7bd2]{margin-bottom:0;margin-right:%?30?%}\n\n/* 上传凭证 */.row-voucher[data-v-b50e7bd2]{padding:%?24?% %?20?%}.row-voucher .image-list[data-v-b50e7bd2]:after{clear:both;content:" ";display:table}.row-voucher .image-list uni-image[data-v-b50e7bd2]{display:block;width:%?150?%;height:%?150?%}.row-voucher .image-list .image-picker[data-v-b50e7bd2]{width:%?150?%;height:%?150?%;border:%?1?% dashed #ccc;color:#ccc}.row-voucher .image-list .image-picker .choose__icon[data-v-b50e7bd2]{font-size:%?56?%;margin-bottom:%?6?%}.row-voucher .image-list .image-picker .choose__text[data-v-b50e7bd2]{font-size:%?22?%}.row-voucher .image-list .image-picker[data-v-b50e7bd2],\n.image-list .image-preview[data-v-b50e7bd2]{margin:%?15?% %?30?% %?15?% 0;float:left}.row-voucher .image-list .image-picker[data-v-b50e7bd2]:nth-child(4n + 0),\n.row-voucher .image-list .image-preview[data-v-b50e7bd2]:nth-child(4n + 0){margin-right:0}.row-voucher .image-list .image-preview[data-v-b50e7bd2]{position:relative}.row-voucher .image-list .image-preview .image-delete[data-v-b50e7bd2]{position:absolute;top:%?-15?%;right:%?-15?%;height:%?42?%;width:%?42?%;line-height:%?42?%;background:rgba(0,0,0,.64);border-radius:50%;color:#fff;font-weight:bolder;font-size:%?22?%;z-index:10;text-align:center}',""]),t.exports=e},ec62:function(t,e,i){"use strict";i.r(e);var a=i("6fa3"),o=i("3e08");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("5ade");var s,d=i("f0c5"),r=Object(d["a"])(o["default"],a["b"],a["c"],!1,null,"b50e7bd2",null,!1,a["a"],s);e["default"]=r.exports}}]);