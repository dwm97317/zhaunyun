(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sharing-order-comment-comment"],{"30ad":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,'.goods-list[data-v-1d33f026]{border-top:%?1?% solid #e3e3e3;font-size:%?28?%}.goods-item[data-v-1d33f026]{margin-bottom:%?30?%;border-bottom:%?1?% solid #e3e3e3;background:#fff}.goods-item .goods-detail[data-v-1d33f026]{padding:%?24?% %?20?%}.goods-item .goods-detail .left .goods-image[data-v-1d33f026]{display:block;width:%?150?%;height:%?150?%}.goods-item .goods-detail .right[data-v-1d33f026]{padding-left:%?20?%}.goods-item .score-row[data-v-1d33f026]{padding:%?24?% %?20?%}.goods-item .score-row .score-item.score__praise[data-v-1d33f026]{color:#ff4544}.goods-item .score-row .score-item.score__praise .score__icon[data-v-1d33f026]{background:#ff4544}.goods-item .score-row .score-item.score__review[data-v-1d33f026]{color:#fcb500}.goods-item .score-row .score-item.score__review .score__icon[data-v-1d33f026]{background:#fcb500}.goods-item .score-row .score-item.score__negative[data-v-1d33f026]{color:#9b9b9b}.goods-item .score-row .score-item.score__negative .score__icon[data-v-1d33f026]{background:#9b9b9b}.goods-item .score-row .score-item .score[data-v-1d33f026]{padding:%?10?% %?20?% %?10?% %?10?%;border-radius:%?30?%}.goods-item .score-row .score-item .score .score__icon[data-v-1d33f026]{margin-right:%?10?%;padding:%?10?%;border-radius:50%;font-size:%?30?%;color:#fff}.goods-item .score-row .score-item.__active .score[data-v-1d33f026]{color:#fff}.goods-item .score-row .score-item.__active.score__praise .score[data-v-1d33f026]{background:#ff4544}.goods-item .score-row .score-item.__active.score__review .score[data-v-1d33f026]{background:#fcb500}.goods-item .score-row .score-item.__active.score__negative .score[data-v-1d33f026]{background:#9b9b9b}.goods-item .content-row[data-v-1d33f026]{padding:%?10?% %?20?%}.goods-item .content-row uni-textarea[data-v-1d33f026]{width:100%;height:%?220?%;padding:%?12?%;border:%?1?% solid #e8e8e8;border-radius:%?5?%;box-sizing:border-box}.goods-item .image-list[data-v-1d33f026]{padding:%?24?% %?20?%}.goods-item .image-list[data-v-1d33f026]:after{clear:both;content:" ";display:table}.goods-item .image-list uni-image[data-v-1d33f026]{display:block;width:%?150?%;height:%?150?%}.goods-item .image-list .image-picker[data-v-1d33f026]{width:%?150?%;height:%?150?%;border:%?1?% dashed #ccc;color:#ccc}.goods-item .image-list .image-picker .choose__icon[data-v-1d33f026]{font-size:%?56?%;margin-bottom:%?6?%}.goods-item .image-list .image-picker .choose__text[data-v-1d33f026]{font-size:%?22?%}.goods-item .image-list .image-picker[data-v-1d33f026],\n.goods-item .image-list .image-preview[data-v-1d33f026]{margin-right:%?30?%;margin-top:%?30?%;float:left}.goods-item .image-list .image-picker[data-v-1d33f026]:nth-child(4n + 0),\n.goods-item .image-list .image-preview[data-v-1d33f026]:nth-child(4n + 0){margin-right:0}.goods-item .image-list .image-preview[data-v-1d33f026]{position:relative}.goods-item .image-list .image-preview .image-delete[data-v-1d33f026]{position:absolute;top:%?-15?%;right:%?-15?%;height:%?42?%;width:%?42?%;line-height:%?42?%;background:rgba(0,0,0,.64);border-radius:50%;color:#fff;font-weight:bolder;font-size:%?22?%;z-index:10;text-align:center}',""]),t.exports=e},"66fd":function(t,e,i){"use strict";i.r(e);var o=i("6fb9"),a=i("91d6");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("e284");var n,r=i("f0c5"),d=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"1d33f026",null,!1,o["a"],n);e["default"]=d.exports},"6fb9":function(t,e,i){"use strict";var o;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.goodsList.length&&t.formData.length?i("v-uni-view",{staticClass:"containers p-bottom"},[i("v-uni-view",{staticClass:"goods-list"},t._l(t.goodsList,(function(e,o){return i("v-uni-view",{key:o,staticClass:"goods-item"},[i("v-uni-view",{staticClass:"goods-detail dis-flex flex-dir-row"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{staticClass:"goods-image",attrs:{src:e.image.file_path}})],1),i("v-uni-view",{staticClass:"right dis-flex flex-box flex-dir-column flex-x-around"},[i("v-uni-text",{staticClass:"twolist-hidden"},[t._v(t._s(e.goods_name))]),i("v-uni-text",{},[t._v("￥"+t._s(e.goods_price))])],1)],1),i("v-uni-view",{staticClass:"score-row dis-flex flex-x-around"},[i("v-uni-view",{class:"score-item score__praise dis-flex flex-y-center flex-x-center "+(10==t.formData[o].score?"__active":""),attrs:{"data-index":o,"data-score":"10"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setScore.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"score"},[i("v-uni-text",{staticClass:"score__icon iconfont icon-haoping"}),i("v-uni-text",{staticClass:"score__text"},[t._v(t._s(t.$t("pintuandingdan.pjhao")))])],1)],1),i("v-uni-view",{class:"score-item score__review dis-flex flex-y-center flex-x-center "+(20==t.formData[o].score?"__active":""),attrs:{"data-index":o,"data-score":"20"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setScore.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"score"},[i("v-uni-text",{staticClass:"score__icon iconfont icon-zhongping"}),i("v-uni-text",{staticClass:"score__text"},[t._v(t._s(t.$t("pintuandingdan.pjzhong")))])],1)],1),i("v-uni-view",{class:"score-item score__negative dis-flex flex-y-center flex-x-center "+(30==t.formData[o].score?"__active":""),attrs:{"data-index":o,"data-score":"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setScore.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"score"},[i("v-uni-text",{staticClass:"score__icon iconfont icon-chaping"}),i("v-uni-text",{staticClass:"score__text"},[t._v(t._s(t.$t("pintuandingdan.pjcha")))])],1)],1)],1),i("v-uni-view",{staticClass:"dis-flex content-row"},[i("v-uni-textarea",{attrs:{"data-index":o,maxlength:"2000",placeholder:"请输入评价内容 (留空则不评价)",placeholderStyle:"color:#ccc"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.contentInput.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"image-list"},[t._l(t.formData[o].image_list,(function(e,a){return i("v-uni-view",{key:a,staticClass:"image-preview"},[i("v-uni-text",{staticClass:"image-delete iconfont icon-shanchu",attrs:{"data-index":o,"data-image-index":a},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.deleteImage.apply(void 0,arguments)}}}),i("v-uni-image",{attrs:{mode:"aspectFill",src:e}})],1)})),!t.formData[o].image_list||t.formData[o].image_list.length<6?i("v-uni-view",{staticClass:"image-picker dis-flex flex-dir-column flex-x-center flex-y-center",attrs:{"data-index":o},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"choose__icon iconfont icon-tubiao_xiangji"}),i("v-uni-text",{staticClass:"choose__text"},[t._v(t._s(t.$t("pintuandingdan.sctp")))])],1):t._e()],2)],1)})),1),i("v-uni-view",{staticClass:"flow-fixed-footer b-f"},[i("v-uni-view",{staticClass:"flow-btn f-32"},[i("v-uni-view",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v(t._s(t.$t("pintuandingdan.qrtj")))])],1)],1)],1):t._e()},s=[]},"91d6":function(t,e,i){"use strict";i.r(e);var o=i("e0f9"),a=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=a.a},bf89:function(t,e,i){var o=i("30ad");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=i("4f06").default;a("a8d73c6e",o,!0,{sourceMap:!1,shadowMode:!1})},e0f9:function(t,e,i){"use strict";i("99af"),i("4160"),i("a434"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=getApp(),a={data:function(){return{options:null,goodsList:[],formData:[],imageIndex:0,imagePath:"",length:0}},onLoad:function(t){this.options=t,this.getGoodsList()},methods:{submitDisable:!1,getGoodsList:function(){var t=this;o.globalData._get("sharing.comment/order",{order_id:this.options.order_id},(function(e){var i=e.data.goodsList;t.setData({goodsList:i,formData:t.initFormData(i)})}))},initFormData:function(t){var e=[];return t.forEach((function(t){e.push({goods_id:t.goods_id,order_goods_id:t.order_goods_id,score:10,content:"",image_list:[],uploaded:[]})})),e},setScore:function(t){var e=t.currentTarget.dataset;this.formData[e.index].score=e.score},contentInput:function(t){var e=t.currentTarget.dataset.index;this.formData[e].content=t.detail.value},chooseImage:function(t){var e=this,i=t.currentTarget.dataset.index,o=e.formData[i].image_list;uni.chooseImage({count:6-o.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.formData[i].image_list=o.concat(t.tempFilePaths)}})},deleteImage:function(t){var e=t.currentTarget.dataset,i=this.formData[e.index].image_list;i.splice(e.imageIndex,1),this.formData[e.index].image_list=i},submit:function(){var t=this,e=t.formData;if(!0===t.submitDisable)return!1;t.submitDisable=!0,uni.showLoading({title:"正在处理...",mask:!0});var i=function(e){console.log("fromPostCall"),console.log(e),o.globalData._post_form("sharing.comment/order",{order_id:t.options.order_id,formData:JSON.stringify(e)},(function(t){1===t.code?o.globalData.showSuccess(t.msg,(function(){uni.navigateBack()})):o.globalData.showError(t.msg)}),!1,(function(){uni.hideLoading(),t.submitDisable=!1}))},a=0;e.forEach((function(t,e){""!==t.content&&(a+=t.image_list.length)})),a>0?t.uploadFile(a,e,i):i(e)},uploadFile:function(t,e,i){var a={wxapp_id:o.globalData.getWxappId(),token:uni.getStorageSync("token")},s=0;e.forEach((function(n,r){""!==n.content&&n.image_list.forEach((function(r,d){uni.uploadFile({url:o.globalData.api_root+"upload/image",filePath:r,name:"iFile",formData:a,success:function(t){var e="object"===typeof t.data?t.data:JSON.parse(t.data);1===e.code&&(n.uploaded[d]=e.data.file_id)},complete:function(){s++,t===s&&(console.log("upload complete"),i&&i(e))}})}))}))}}};e.default=a},e284:function(t,e,i){"use strict";var o=i("bf89"),a=i.n(o);a.a}}]);