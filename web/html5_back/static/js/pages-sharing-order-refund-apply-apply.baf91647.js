(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sharing-order-refund-apply-apply"],{1946:function(t,i,e){"use strict";var a=e("29a2"),o=e.n(a);o.a},2442:function(t,i,e){"use strict";e("99af"),e("4160"),e("a434"),e("159b"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=getApp(),o={data:function(){return{order_goods_id:null,detail:{order_goods_id:"",goods_id:"",image:{file_path:""},goods_name:"",goods_attr:"",total_num:"",total_pay_price:""},imageList:[],serviceType:10,imageIndex:0,imagePath:""}},onLoad:function(t){this.order_goods_id=t.order_goods_id,this.getGoodsDetail()},methods:{disable:!1,getGoodsDetail:function(){var t=this;a.globalData._get("sharing.refund/apply",{order_goods_id:this.order_goods_id},(function(i){t.setData(i.data)}))},onSwitchService:function(t){a.globalData.saveFormId(t.detail.formId),this.setData({serviceType:t.detail.target.dataset.type})},onGoodsDetail:function(t){a.globalData.saveFormId(t.detail.formId),uni.navigateTo({url:"../../../goods/index?goods_id="+t.detail.target.dataset.id})},chooseImage:function(t){var i=this,e=(t.currentTarget.dataset.index,i.imageList);a.globalData.saveFormId(t.detail.formId),uni.chooseImage({count:6-e.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){i.setData({imageList:e.concat(t.tempFilePaths)})}})},deleteImage:function(t){var i=t.currentTarget.dataset,e=this.imageList;e.splice(i.imageIndex,1),this.setData({imageList:e})},onSubmit:function(t){var i=this;if(!t.detail.value.content)return a.globalData.showError(i.$t("pintuandingdan.shenqingyuanyintxts")),!1;if(!0===i.disable)return!1;i.disable=!0,uni.showLoading({title:i.$t("pintuandingdan.chuli"),mask:!0});var e={order_goods_id:i.order_goods_id,type:i.serviceType,content:t.detail.value.content},o=function(t){console.log("fromPostCall"),a.globalData._post_form("sharing.refund/apply",t,(function(t){1===t.code?a.globalData.showSuccess(t.msg,(function(){uni.navigateTo({url:"../index"})})):a.globalData.showError(t.msg)}),!1,(function(){uni.hideLoading(),i.disable=!1}))},n=i.imageList.length;n>0?i.uploadFile(n,o,e):o(e)},uploadFile:function(t,i,e){var o=[],n=0;this.imageList.forEach((function(s,d){uni.uploadFile({url:a.globalData.api_root+"upload/image",filePath:s,name:"iFile",formData:{wxapp_id:a.globalData.getWxappId(),token:uni.getStorageSync("token")},success:function(t){var i="object"===typeof t.data?t.data:JSON.parse(t.data);1===i.code&&(o[d]=i.data.file_id)},complete:function(){n++,t===n&&(console.log("upload complete"),e["images"]=o,i&&i(e))}})}))}}};i.default=o},"29a2":function(t,i,e){var a=e("d813");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=e("4f06").default;o("2a8cdaee",a,!0,{sourceMap:!1,shadowMode:!1})},8374:function(t,i,e){"use strict";e.r(i);var a=e("d93c"),o=e("dbb76");for(var n in o)"default"!==n&&function(t){e.d(i,t,(function(){return o[t]}))}(n);e("1946");var s,d=e("f0c5"),r=Object(d["a"])(o["default"],a["b"],a["c"],!1,null,"b50e7bd2",null,!1,a["a"],s);i["default"]=r.exports},d813:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'.container[data-v-b50e7bd2]{font-size:%?28?%}.row-title[data-v-b50e7bd2]{color:#888;margin-bottom:%?20?%}.goods-detail[data-v-b50e7bd2]{padding:%?24?% %?20?%}.goods-detail .left .goods-image[data-v-b50e7bd2]{display:block;width:%?150?%;height:%?150?%}.goods-detail .right[data-v-b50e7bd2]{padding-left:%?20?%}\n\n/* 服务类型 */.row-service[data-v-b50e7bd2]{padding:%?24?% %?20?%}.service-switch .switch-item[data-v-b50e7bd2]{height:%?38?%;line-height:%?38?%;padding:%?10?% %?30?%;margin-right:%?25?%;border-radius:%?10?%;border:1px solid #b1b1b1;color:#888}.service-switch .switch-item.active[data-v-b50e7bd2]{color:#fc1e56;border:1px solid #fc1e56}\n\n/* 申请原因 */.row-textarea[data-v-b50e7bd2]{padding:%?24?% %?20?%}.row-textarea uni-textarea[data-v-b50e7bd2]{width:100%;height:%?220?%;padding:%?12?%;border:%?1?% solid #e8e8e8;border-radius:%?5?%;-webkit-box-sizing:border-box;box-sizing:border-box}\n\n/* 退款金额 */.row-money[data-v-b50e7bd2]{padding:%?24?% %?20?%}.row-money .row-title[data-v-b50e7bd2]{margin-bottom:0;margin-right:%?30?%}\n\n/* 上传凭证 */.row-voucher[data-v-b50e7bd2]{padding:%?24?% %?20?%}.row-voucher .image-list[data-v-b50e7bd2]:after{clear:both;content:" ";display:table}.row-voucher .image-list uni-image[data-v-b50e7bd2]{display:block;width:%?150?%;height:%?150?%}.row-voucher .image-list .image-picker[data-v-b50e7bd2]{width:%?150?%;height:%?150?%;border:%?1?% dashed #ccc;color:#ccc}.row-voucher .image-list .image-picker .choose__icon[data-v-b50e7bd2]{font-size:%?56?%;margin-bottom:%?6?%}.row-voucher .image-list .image-picker .choose__text[data-v-b50e7bd2]{font-size:%?22?%}.row-voucher .image-list .image-picker[data-v-b50e7bd2],\n.image-list .image-preview[data-v-b50e7bd2]{margin:%?15?% %?30?% %?15?% 0;float:left}.row-voucher .image-list .image-picker[data-v-b50e7bd2]:nth-child(4n + 0),\n.row-voucher .image-list .image-preview[data-v-b50e7bd2]:nth-child(4n + 0){margin-right:0}.row-voucher .image-list .image-preview[data-v-b50e7bd2]{position:relative}.row-voucher .image-list .image-preview .image-delete[data-v-b50e7bd2]{position:absolute;top:%?-15?%;right:%?-15?%;height:%?42?%;width:%?42?%;line-height:%?42?%;background:rgba(0,0,0,.64);border-radius:50%;color:#fff;font-weight:bolder;font-size:%?22?%;z-index:10;text-align:center}',""]),t.exports=i},d93c:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return a}));var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.detail.order_goods_id?e("v-uni-view",{staticClass:"containers p-bottom"},[e("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onSubmit.apply(void 0,arguments)}}},[e("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onGoodsDetail.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit","data-id":t.detail.goods_id}},[e("v-uni-view",{staticClass:"goods-detail b-f dis-flex flex-dir-row"},[e("v-uni-view",{staticClass:"left"},[e("v-uni-image",{staticClass:"goods-image",attrs:{src:t.detail.image.file_path}})],1),e("v-uni-view",{staticClass:"right dis-flex flex-box flex-dir-column flex-x-around"},[e("v-uni-view",{staticClass:"goods-name"},[e("v-uni-text",{staticClass:"twolist-hidden"},[t._v(t._s(t.detail.goods_name))])],1),e("v-uni-view",{staticClass:"dis-flex col-9 f-24"},[e("v-uni-view",{staticClass:"flex-box"},[t._v(t._s(t.detail.goods_attr))]),e("v-uni-text",{staticClass:"t-r"},[t._v("×"+t._s(t.detail.total_num))])],1)],1)],1)],1)],1),e("v-uni-view",{staticClass:"row-service b-f m-top20"},[e("v-uni-view",{staticClass:"row-title"},[t._v(t._s(t.$t("pintuandingdan.fuwuleixing")))]),e("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onSwitchService.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"service-switch dis-flex"},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit","data-type":"10"}},[e("v-uni-view",{class:"switch-item "+(10==t.serviceType?"active":"")},[t._v("退货退款")])],1),e("v-uni-button",{staticClass:"btn-normal dis-flex",attrs:{formType:"submit","data-type":"20"}},[e("v-uni-view",{class:"switch-item "+(20==t.serviceType?"active":"")},[t._v("换货")])],1)],1)],1)],1),e("v-uni-view",{staticClass:"row-textarea b-f m-top20"},[e("v-uni-view",{staticClass:"row-title"},[t._v(t._s(t.$t("pintuandingdan.shenqingyuanyin")))]),e("v-uni-view",{staticClass:"content"},[e("v-uni-textarea",{attrs:{name:"content",maxlength:"2000",placeholder:t.$t("pintuandingdan.shenqingyuanyintxt"),placeholderStyle:"color:#ccc"}})],1)],1),10==t.serviceType?e("v-uni-view",{staticClass:"row-money b-f m-top20 dis-flex"},[e("v-uni-view",{staticClass:"row-title"},[t._v(t._s(t.$t("pintuandingdan.tuikuanjine")))]),e("v-uni-view",{staticClass:"money col-m"},[t._v("￥"+t._s(t.detail.total_pay_price))])],1):t._e(),e("v-uni-view",{staticClass:"row-voucher b-f m-top20"},[e("v-uni-view",{staticClass:"row-title"},[t._v(t._s(t.$t("pintuandingdan.pinzhengs")))]),e("v-uni-view",{staticClass:"image-list"},[t._l(t.imageList,(function(i,a){return e("v-uni-view",{key:a,staticClass:"image-preview"},[e("v-uni-text",{staticClass:"image-delete iconfont icon-shanchu",attrs:{"data-index":t.index,"data-image-index":a},on:{click:function(i){i.stopPropagation(),i.preventDefault(),arguments[0]=i=t.$handleEvent(i),t.deleteImage.apply(void 0,arguments)}}}),e("v-uni-image",{attrs:{mode:"aspectFill",src:i}})],1)})),t.imageList.length<6?e("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseImage.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[e("v-uni-view",{staticClass:"image-picker dis-flex flex-dir-column flex-x-center flex-y-center"},[e("v-uni-text",{staticClass:"choose__icon iconfont icon-tubiao_xiangji"}),e("v-uni-text",{staticClass:"choose__text"},[t._v(t._s(t.$t("pintuandingdan.sctp")))])],1)],1)],1):t._e()],2)],1),e("v-uni-view",{staticClass:"flow-fixed-footer b-f"},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[e("v-uni-view",{staticClass:"flow-btn f-32"},[t._v(t._s(t.$t("pintuandingdan.qrtj")))])],1)],1)],1)],1):t._e()},n=[]},dbb76:function(t,i,e){"use strict";e.r(i);var a=e("2442"),o=e.n(a);for(var n in a)"default"!==n&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=o.a}}]);