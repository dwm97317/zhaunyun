(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-flow-index"],{"15e5":function(t,e,i){"use strict";i.r(e);var a=i("1baa"),o=i("6af3");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("9439");var s,c=i("f0c5"),d=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"4433d7c2",null,!1,a["a"],s);e["default"]=d.exports},"1baa":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{},[i("v-uni-view",{staticClass:"header header_wi",style:"padding-top: "+t.navH+"px;"},[i("v-uni-view",{staticClass:"header_height",style:"height:"+t.gaodu+"px;line-height:"+t.gaodu+"px;top:"+t.gaodutops+"px;"},[i("v-uni-view",{staticClass:"index_h_cont3"},[i("v-uni-view",{staticClass:"index_wenben_img",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpzuo.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:"http://daigou.sllowly.cn/assets/api/images/dzx_img33.png",mode:"widthFix"}})],1),i("v-uni-view",{staticClass:"index_wenben"},[t._v("购物车")])],1)],1),i("v-uni-view",{staticClass:"coloe_title"},[t._v("s")])],1),i("v-uni-view",{staticClass:"index_center",style:"padding-top:"+(t.navH+50)+"px;"},[i("v-uni-view",{staticClass:"containers p-bottom"},[i("v-uni-view",{staticClass:"flow-list"},[t.goods_list.length?i("v-uni-view",[i("v-uni-view",{staticClass:"cart-edit-wrap dis-flex flex-x-end"},["complete"===t.action?i("v-uni-text",{staticClass:"f-30",attrs:{"data-action":"edit"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.switchAction.apply(void 0,arguments)}}},[t._v("编辑")]):t._e(),"edit"===t.action?i("v-uni-text",{staticClass:"f-30",attrs:{"data-action":"complete"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.switchAction.apply(void 0,arguments)}}},[t._v("完成")]):t._e()],1),t._l(t.goods_list,(function(e,a){return i("v-uni-view",{key:a},[i("v-uni-view",{staticClass:"dish-item dis-flex flex-y-center",style:e.txtStyle,attrs:{"data-index":a}},[i("v-uni-view",{staticClass:"dish-item-radio",attrs:{"data-index":a},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.onChecked.apply(void 0,arguments)}}},[i("v-uni-label",{staticClass:"radio"},[i("v-uni-radio",{attrs:{checked:e.checked,color:"#ff495e"}})],1)],1),i("v-uni-view",{staticClass:"dish-item-wrp dis-flex flex-box"},[i("v-uni-navigator",{attrs:{"hover-class":"none",url:"../goods/index?goods_id="+e.goods_id}},[i("v-uni-view",{staticClass:"dish-item-pic"},[i("v-uni-image",{staticClass:"image",attrs:{mode:"aspectFill",src:e.goods_image}})],1)],1),i("v-uni-view",{staticClass:"dish-item-info flex-box"},[i("v-uni-navigator",{attrs:{"hover-class":"none",url:"../goods/index?goods_id="+e.goods_id}},[i("v-uni-view",{staticClass:"goods-name"},[i("v-uni-text",{staticClass:"twolist-hidden f-28 col-3"},[t._v(t._s(e.goods_name))])],1),i("v-uni-view",{staticClass:"goods-attr dis-flex"},[i("v-uni-text",{staticClass:"col-7 f-24"},[t._v(t._s(e.goods_sku.goods_attr))])],1)],1),i("v-uni-view",{staticClass:"dis-flex flex-x-between m-top20"},[i("v-uni-view",{staticClass:"wx-goods_price dis-flex flex-y-center"},[e.is_user_grade?i("v-uni-text",{staticClass:"dish-item-money"},[t._v("￥"+t._s(e.grade_goods_price))]):i("v-uni-text",{staticClass:"dish-item-money"},[t._v("￥"+t._s(e.goods_price))])],1),i("v-uni-view",{staticClass:"select-number"},[i("v-uni-button",{class:"default "+(e.total_num>1?"":"disabled"),attrs:{"data-index":a,"data-sku-id":e.goods_sku_id,type:"default"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.onSubCount.apply(void 0,arguments)}}},[t._v("-")]),i("v-uni-input",{attrs:{disabled:!0,type:"number",value:e.total_num},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.importTo.apply(void 0,arguments)}}}),i("v-uni-button",{staticClass:"default",attrs:{"data-index":a,"data-sku-id":e.goods_sku_id,type:"default"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.onAddCount.apply(void 0,arguments)}}},[t._v("+")])],1)],1)],1)],1)],1)],1)})),i("v-uni-view",{staticClass:"cart-tab-wrp"},[i("v-uni-view",{staticClass:"cart-item-total cart-tab-item dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"checked-all"},[i("v-uni-label",{staticClass:"radio dis-flex flex-y-center",on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.onCheckedAll.apply(void 0,arguments)}}},[i("v-uni-radio",{staticClass:"margin-right: 10rpx;",attrs:{checked:t.checkedAll,color:"#ff495e"}}),i("v-uni-text",{staticClass:"f-28"},[t._v("全选")])],1)],1),"complete"===t.action?i("v-uni-view",{staticClass:"cart-item-total-price dis-flex"},[i("v-uni-text",{staticClass:"f-28 col-m"},[t._v("合计：￥"+t._s(t.cartTotalPrice))])],1):t._e()],1),i("v-uni-view",{staticClass:"cart-tab-item_1"},["complete"===t.action?i("v-uni-view",{staticClass:"cart-tab-item-btn",on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("去结算")]):t._e(),"edit"===t.action?i("v-uni-view",{staticClass:"cart-tab-item-btn",on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.onDelete.apply(void 0,arguments)}}},[t._v("删除")]):t._e()],1)],1)],2):i("v-uni-view",[i("v-uni-view",{staticClass:"yoshop-notcont"},[i("v-uni-text",{staticClass:"iconfont icon-wushuju"}),i("v-uni-text",{staticClass:"cont"},[t._v("亲，购物车还没有商品哦")]),i("v-uni-view",{staticClass:"flow-btn-min",on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.goShopping.apply(void 0,arguments)}}},[t._v("去购物")])],1)],1)],1)],1)],1)],1)},n=[]},"1fb7":function(t,e,i){i("d3b7");var a=getApp(),o=a.globalData.url;function n(t,e){var i=new Promise((function(i,a){uni.showLoading({title:"加载中..."}),uni.request({url:o+"".concat(t),data:e,method:"POST",header:{platform:"H5"},success:function(t){uni.hideLoading({success:function(t){}}),-1==t.data.code&&(uni.removeStorageSync("token"),uni.removeStorageSync("userInfo"),uni.showModal({title:"",content:"您的登录状态已过期，请重新登录！",showCancel:!1,confirmText:"去登录",success:function(t){t.confirm&&uni.reLaunch({url:"/pages/my/my"})}})),i(t)},fail:function(t){uni.showToast({title:"网络似乎开小差了2",icon:"none",duration:2e3}),a(t)}})}));return i}function s(t,e){var i=new Promise((function(i,a){uni.showLoading({title:"加载中..."}),uni.request({url:o+"".concat(t),data:e,method:"GET",header:{platform:"H5"},success:function(t){uni.hideLoading({success:function(t){}}),-1==t.data.code&&(console.log(333),uni.removeStorageSync("token"),uni.removeStorageSync("userInfo"),uni.showModal({title:"",content:"您的登录状态已过期，请重新登录！",showCancel:!1,confirmText:"去登录",success:function(t){t.confirm&&uni.reLaunch({url:"/pages/my/my"})}})),i(t)},fail:function(t){uni.showToast({title:"网络似乎开小差了",icon:"none",duration:2e3}),a(t)}})}));return i}t.exports={post:n,get:s}},"6af3":function(t,e,i){"use strict";i.r(e);var a=i("f732"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},7443:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".image[data-v-4433d7c2]{width:100%;height:100%}.cart-edit-wrap[data-v-4433d7c2]{padding:%?15?%}.cart-tab-item-btn[data-v-4433d7c2]{width:%?160?%;display:block;height:%?100?%;line-height:%?100?%;font-size:%?30?%;background:linear-gradient(90deg,#fa1e8c 0,#fc1e56);color:#fff;float:right;text-align:center}.cart-tab-item[data-v-4433d7c2]{width:75%}.cart-tab-item_1[data-v-4433d7c2]{width:25%}.cart-tab-wrp[data-v-4433d7c2]{height:%?100?%;position:fixed;bottom:%?0?%;background:#fff;border-top:%?1?% solid #ddd;display:flex;flex-direction:row;width:100%;z-index:10;color:#000}.cart-tab-item[data-v-4433d7c2]{overflow:hidden\n    /* line-height: 100rpx; */}.cart-tab-item .cart-item-total-price[data-v-4433d7c2]{\n    /* float: left; */}.cart-item-total[data-v-4433d7c2]{padding-left:%?30?%}.cart-item-total-price[data-v-4433d7c2]{\n    /* color: #ff495e; */\n    /* text-align: center; */margin-left:%?15?%}.cart-item-total-price em[data-v-4433d7c2]{display:block}.cart-item-icon-wrp[data-v-4433d7c2]{width:%?110?%;height:%?90?%;position:absolute;top:%?-4?%}.cart-item-icon[data-v-4433d7c2]{width:%?90?%;height:%?90?%}.dish-item[data-v-4433d7c2]{width:100%;padding:%?26?% %?20?%;border-bottom:%?1?% solid #eee;position:relative;background:#fff;box-sizing:border-box}.dish-item-radio[data-v-4433d7c2]{padding:%?20?% 0}.dish-item-wrp[data-v-4433d7c2]{flex-direction:row}.dish-item-pic[data-v-4433d7c2]{width:100%;margin-left:%?12?%}.dish-item-pic uni-image[data-v-4433d7c2]{width:%?180?%;height:%?180?%;margin:0 auto;background:#fff;border:%?1?% solid #eee}.dish-item-info[data-v-4433d7c2]{padding-left:%?16?%\n    /* margin-right: 15px; */ /* width: 68%; */}.dish-item-info .goods-name[data-v-4433d7c2]{height:%?80?%}.dish-item-sales[data-v-4433d7c2]{color:#ccc;font-size:%?20?%;line-height:%?50?%}.dish-item-money[data-v-4433d7c2]{color:#ff495e;font-size:%?32?%\n    /* padding: 0 0 10rpx 0; */}.wx-goods_price[data-v-4433d7c2]{overflow:hidden}.flow-dete[data-v-4433d7c2]{position:absolute;bottom:%?25?%;right:%?30?%}.flow-dete .icon-lajixiang[data-v-4433d7c2]{color:#777;font-size:%?34?%}.flow-btn-min[data-v-4433d7c2]{background:#fff;border:%?1?% solid #ccc;height:30px;line-height:30px;font-size:%?28?%;width:%?200?%;margin:0 auto;border-radius:5px;text-align:center;color:#777;margin-top:%?25?%}.select-number[data-v-4433d7c2]{width:%?202?%;height:%?52?%;flex-direction:row;border:%?1?% solid #e7e7e7;border-radius:%?5?%}.select-number .default[data-v-4433d7c2]{float:left;width:%?60?%;height:%?52?%;line-height:%?48?%;padding:0;background:#fff;color:#444;font-size:%?40?%;border-radius:unset}.select-number .disabled[data-v-4433d7c2]{background:#f7f7f7;color:#ddd}.select-number uni-button[data-v-4433d7c2]:after{content:none;border:none}.select-number uni-input[data-v-4433d7c2]{float:left;width:%?80?%;height:%?52?%;line-height:%?52?%;border-right:%?1?% solid #eee;border-left:%?1?% solid #eee;text-align:center;font-size:%?28?%;color:#444}",""]),t.exports=e},9439:function(t,e,i){"use strict";var a=i("9a95"),o=i.n(a);o.a},"9a95":function(t,e,i){var a=i("7443");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("66568cb4",a,!0,{sourceMap:!1,shadowMode:!1})},f732:function(t,e,i){"use strict";var a=i("4ea4");i("99af"),i("4160"),i("a434"),i("a9e3"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("6f54")),n=getApp(),s=i("1fb7"),c={data:function(){return{navH:0,gaodu:n.globalData.height,gaodutops:n.globalData.top,isLogin:!1,goods_list:[],action:"complete",checkedData:[],checkedAll:!1,cartTotalPrice:"0.00",order_total_price:""}},onLoad:function(t){},onShow:function(){var t=this;t.setData({isLogin:n.globalData.checkIsLogin()}),console.log(t.isLogin,"?"),t.getCartList(),t.dizhilist(),t.isLogin},methods:{dizhilist:function(){var t={token:uni.getStorageSync("token")};s.post("index.php?s=/api/address/lists&wxapp_id="+uni.getStorageSync("web_id"),t).then((function(t){t.data.code}))},jumpzuo:function(){uni.navigateBack()},getCartList:function(){var t=this;n.globalData._get("cart/lists",{},(function(e){t._initGoodsChecked(e.data)}))},_initGoodsChecked:function(t){var e=this,i=e.getCheckedData();t.goods_list.forEach((function(t){t.checked=o.default.inArray("".concat(t.goods_id,"_").concat(t.goods_sku_id),i)})),e.setData({goods_list:t.goods_list,order_total_price:t.order_total_price,action:"complete",checkedAll:i.length==t.goods_list.length}),e.updateTotalPrice()},onChecked:function(t){var e=this,i=t.currentTarget.dataset.index,a=e.goods_list[i],o=!a.checked;e.goods_list[i].checked=o,e.onUpdateChecked(),e.updateTotalPrice(),e.setData({checkedAll:e.getCheckedData().length==e.goods_list.length})},getCheckedData:function(){var t=uni.getStorageSync("checkedData");return t||[]},onCheckedAll:function(t){var e=this,i=e.goods_list;i.forEach((function(t){t.checked=!e.checkedAll})),e.setData({goods_list:i,checkedAll:!e.checkedAll}),e.updateTotalPrice(),e.onUpdateChecked()},onUpdateChecked:function(){var t=this,e=[];t.goods_list.forEach((function(t){1==t.checked&&e.push("".concat(t.goods_id,"_").concat(t.goods_sku_id))})),uni.setStorageSync("checkedData",e)},switchAction:function(t){var e=this;e.setData({action:t.currentTarget.dataset.action})},onDelete:function(){var t=this,e=t.getCheckedIds();if(!e.length)return n.globalData.showError("您还没有选择商品"),!1;console.log(e),uni.showModal({title:"提示",content:"您确定要移除选择的商品吗?",success:function(i){i.confirm&&n.globalData._post_form("cart/delete",{goods_sku_id:e},(function(i){t.onDeleteEvent(e),t.getCartList()}))}})},onDeleteEvent:function(t){var e=this;return t.forEach((function(t){e.goods_list.forEach((function(i,a){t=="".concat(i.goods_id,"_").concat(i.goods_sku_id)&&e.goods_list.splice(a,1)}))})),e.onUpdateChecked(),!0},getCheckedIds:function(){var t=this,e=[];return t.goods_list.forEach((function(t){!0===t.checked&&e.push("".concat(t.goods_id,"_").concat(t.goods_sku_id))})),e},updateTotalPrice:function(){var t=this,e=0;t.goods_list.forEach((function(i){!0===i.checked&&(e=t.mathadd(e,i.total_price))})),t.setData({cartTotalPrice:Number(e).toFixed(2)})},onAddCount:function(t){var e=this,i=t.currentTarget.dataset.index,a=t.currentTarget.dataset.skuId,o=e.goods_list[i];uni.showLoading({title:"加载中",mask:!0}),n.globalData._post_form("cart/add",{goods_id:o.goods_id,goods_num:1,goods_sku_id:a},(function(){e.getCartList()}),null,(function(){uni.hideLoading()}))},onSubCount:function(t){var e=this,i=t.currentTarget.dataset.index,a=t.currentTarget.dataset.skuId,o=e.goods_list[i];o.total_num>1&&(uni.showLoading({title:"加载中",mask:!0}),n.globalData._post_form("cart/sub",{goods_id:o.goods_id,goods_sku_id:a},(function(){e.getCartList()}),null,(function(){uni.hideLoading()})))},submit:function(){var t=this,e=t.getCheckedIds();if(!e.length)return n.globalData.showError("您还没有选择商品"),!1;uni.navigateTo({url:"../flow/checkout?order_type=cart&cart_ids="+e})},mathadd:function(t,e){return(Number(t)+Number(e)).toFixed(2)},mathsub:function(t,e){return(Number(t)-Number(e)).toFixed(2)},goShopping:function(){uni.navigateTo({url:"../pintuan/pintuan"})},importFun:function(){console.log("占位：函数 import 未声明")}}};e.default=c}}]);