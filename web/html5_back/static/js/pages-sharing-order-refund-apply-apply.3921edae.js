(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sharing-order-refund-apply-apply"],{"1c7f":function(t,a,e){"use strict";var i=e("221e"),o=e.n(i);o.a},"221e":function(t,a,e){var i=e("546c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("d89db60a",i,!0,{sourceMap:!1,shadowMode:!1})},"546c":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,'.container[data-v-37a84d38]{font-size:%?28?%}.row-title[data-v-37a84d38]{color:#888;margin-bottom:%?20?%}.goods-detail[data-v-37a84d38]{padding:%?24?% %?20?%}.goods-detail .left .goods-image[data-v-37a84d38]{display:block;width:%?150?%;height:%?150?%}.goods-detail .right[data-v-37a84d38]{padding-left:%?20?%}\n\n/* 服务类型 */.row-service[data-v-37a84d38]{padding:%?24?% %?20?%}.service-switch .switch-item[data-v-37a84d38]{height:%?38?%;line-height:%?38?%;padding:%?10?% %?30?%;margin-right:%?25?%;border-radius:%?10?%;border:1px solid #b1b1b1;color:#888}.service-switch .switch-item.active[data-v-37a84d38]{color:#fc1e56;border:1px solid #fc1e56}\n\n/* 申请原因 */.row-textarea[data-v-37a84d38]{padding:%?24?% %?20?%}.row-textarea uni-textarea[data-v-37a84d38]{width:100%;height:%?220?%;padding:%?12?%;border:%?1?% solid #e8e8e8;border-radius:%?5?%;box-sizing:border-box}\n\n/* 退款金额 */.row-money[data-v-37a84d38]{padding:%?24?% %?20?%}.row-money .row-title[data-v-37a84d38]{margin-bottom:0;margin-right:%?30?%}\n\n/* 上传凭证 */.row-voucher[data-v-37a84d38]{padding:%?24?% %?20?%}.row-voucher .image-list[data-v-37a84d38]:after{clear:both;content:" ";display:table}.row-voucher .image-list uni-image[data-v-37a84d38]{display:block;width:%?150?%;height:%?150?%}.row-voucher .image-list .image-picker[data-v-37a84d38]{width:%?150?%;height:%?150?%;border:%?1?% dashed #ccc;color:#ccc}.row-voucher .image-list .image-picker .choose__icon[data-v-37a84d38]{font-size:%?56?%;margin-bottom:%?6?%}.row-voucher .image-list .image-picker .choose__text[data-v-37a84d38]{font-size:%?22?%}.row-voucher .image-list .image-picker[data-v-37a84d38],\n.image-list .image-preview[data-v-37a84d38]{margin:%?15?% %?30?% %?15?% 0;float:left}.row-voucher .image-list .image-picker[data-v-37a84d38]:nth-child(4n + 0),\n.row-voucher .image-list .image-preview[data-v-37a84d38]:nth-child(4n + 0){margin-right:0}.row-voucher .image-list .image-preview[data-v-37a84d38]{position:relative}.row-voucher .image-list .image-preview .image-delete[data-v-37a84d38]{position:absolute;top:%?-15?%;right:%?-15?%;height:%?42?%;width:%?42?%;line-height:%?42?%;background:rgba(0,0,0,.64);border-radius:50%;color:#fff;font-weight:bolder;font-size:%?22?%;z-index:10;text-align:center}',""]),t.exports=a},b510:function(t,a,e){"use strict";e.r(a);var i=e("fe1c"),o=e("eb00");for(var s in o)"default"!==s&&function(t){e.d(a,t,(function(){return o[t]}))}(s);e("1c7f");var n,r=e("f0c5"),d=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"37a84d38",null,!1,i["a"],n);a["default"]=d.exports},c01a:function(t,a,e){"use strict";e("99af"),e("4160"),e("a434"),e("159b"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=getApp(),o={data:function(){return{order_goods_id:null,detail:{order_goods_id:"",goods_id:"",image:{file_path:""},goods_name:"",goods_attr:"",total_num:"",total_pay_price:""},imageList:[],serviceType:10,imageIndex:0,imagePath:""}},onLoad:function(t){this.order_goods_id=t.order_goods_id,this.getGoodsDetail()},methods:{disable:!1,getGoodsDetail:function(){var t=this;i.globalData._get("sharing.refund/apply",{order_goods_id:this.order_goods_id},(function(a){t.setData(a.data)}))},onSwitchService:function(t){i.globalData.saveFormId(t.detail.formId),this.setData({serviceType:t.detail.target.dataset.type})},onGoodsDetail:function(t){i.globalData.saveFormId(t.detail.formId),uni.navigateTo({url:"../../../goods/index?goods_id="+t.detail.target.dataset.id})},chooseImage:function(t){var a=this,e=(t.currentTarget.dataset.index,a.imageList);i.globalData.saveFormId(t.detail.formId),uni.chooseImage({count:6-e.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){a.setData({imageList:e.concat(t.tempFilePaths)})}})},deleteImage:function(t){var a=t.currentTarget.dataset,e=this.imageList;e.splice(a.imageIndex,1),this.setData({imageList:e})},onSubmit:function(t){var a=this;if(!t.detail.value.content)return i.globalData.showError("申请原因不能为空"),!1;if(!0===a.disable)return!1;a.disable=!0,uni.showLoading({title:"正在处理...",mask:!0});var e={order_goods_id:a.order_goods_id,type:a.serviceType,content:t.detail.value.content},o=function(t){console.log("fromPostCall"),i.globalData._post_form("sharing.refund/apply",t,(function(t){1===t.code?i.globalData.showSuccess(t.msg,(function(){uni.navigateTo({url:"../index"})})):i.globalData.showError(t.msg)}),!1,(function(){uni.hideLoading(),a.disable=!1}))},s=a.imageList.length;s>0?a.uploadFile(s,o,e):o(e)},uploadFile:function(t,a,e){var o=[],s=0;this.imageList.forEach((function(n,r){uni.uploadFile({url:i.globalData.api_root+"upload/image",filePath:n,name:"iFile",formData:{wxapp_id:i.globalData.getWxappId(),token:uni.getStorageSync("token")},success:function(t){var a="object"===typeof t.data?t.data:JSON.parse(t.data);1===a.code&&(o[r]=a.data.file_id)},complete:function(){s++,t===s&&(console.log("upload complete"),e["images"]=o,a&&a(e))}})}))}}};a.default=o},eb00:function(t,a,e){"use strict";e.r(a);var i=e("c01a"),o=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=o.a},fe1c:function(t,a,e){"use strict";var i;e.d(a,"b",(function(){return o})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}));var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.detail.order_goods_id?e("v-uni-view",{staticClass:"containers p-bottom"},[e("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(a){arguments[0]=a=t.$handleEvent(a),t.onSubmit.apply(void 0,arguments)}}},[e("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(a){arguments[0]=a=t.$handleEvent(a),t.onGoodsDetail.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit","data-id":t.detail.goods_id}},[e("v-uni-view",{staticClass:"goods-detail b-f dis-flex flex-dir-row"},[e("v-uni-view",{staticClass:"left"},[e("v-uni-image",{staticClass:"goods-image",attrs:{src:t.detail.image.file_path}})],1),e("v-uni-view",{staticClass:"right dis-flex flex-box flex-dir-column flex-x-around"},[e("v-uni-view",{staticClass:"goods-name"},[e("v-uni-text",{staticClass:"twolist-hidden"},[t._v(t._s(t.detail.goods_name))])],1),e("v-uni-view",{staticClass:"dis-flex col-9 f-24"},[e("v-uni-view",{staticClass:"flex-box"},[t._v(t._s(t.detail.goods_attr))]),e("v-uni-text",{staticClass:"t-r"},[t._v("×"+t._s(t.detail.total_num))])],1)],1)],1)],1)],1),e("v-uni-view",{staticClass:"row-service b-f m-top20"},[e("v-uni-view",{staticClass:"row-title"},[t._v("服务类型")]),e("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(a){arguments[0]=a=t.$handleEvent(a),t.onSwitchService.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"service-switch dis-flex"},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit","data-type":"10"}},[e("v-uni-view",{class:"switch-item "+(10==t.serviceType?"active":"")},[t._v("退货退款")])],1),e("v-uni-button",{staticClass:"btn-normal dis-flex",attrs:{formType:"submit","data-type":"20"}},[e("v-uni-view",{class:"switch-item "+(20==t.serviceType?"active":"")},[t._v("换货")])],1)],1)],1)],1),e("v-uni-view",{staticClass:"row-textarea b-f m-top20"},[e("v-uni-view",{staticClass:"row-title"},[t._v("申请原因")]),e("v-uni-view",{staticClass:"content"},[e("v-uni-textarea",{attrs:{name:"content",maxlength:"2000",placeholder:"请详细填写申请原因，注意保持商品的完好，建议您先与卖家沟通",placeholderStyle:"color:#ccc"}})],1)],1),10==t.serviceType?e("v-uni-view",{staticClass:"row-money b-f m-top20 dis-flex"},[e("v-uni-view",{staticClass:"row-title"},[t._v("退款金额")]),e("v-uni-view",{staticClass:"money col-m"},[t._v("￥"+t._s(t.detail.total_pay_price))])],1):t._e(),e("v-uni-view",{staticClass:"row-voucher b-f m-top20"},[e("v-uni-view",{staticClass:"row-title"},[t._v("上传凭证 (最多6张)")]),e("v-uni-view",{staticClass:"image-list"},[t._l(t.imageList,(function(a,i){return e("v-uni-view",{key:i,staticClass:"image-preview"},[e("v-uni-text",{staticClass:"image-delete iconfont icon-shanchu",attrs:{"data-index":t.index,"data-image-index":i},on:{click:function(a){a.stopPropagation(),a.preventDefault(),arguments[0]=a=t.$handleEvent(a),t.deleteImage.apply(void 0,arguments)}}}),e("v-uni-image",{attrs:{mode:"aspectFill",src:a}})],1)})),t.imageList.length<6?e("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseImage.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[e("v-uni-view",{staticClass:"image-picker dis-flex flex-dir-column flex-x-center flex-y-center"},[e("v-uni-text",{staticClass:"choose__icon iconfont icon-tubiao_xiangji"}),e("v-uni-text",{staticClass:"choose__text"},[t._v("上传图片")])],1)],1)],1):t._e()],2)],1),e("v-uni-view",{staticClass:"flow-fixed-footer b-f"},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[e("v-uni-view",{staticClass:"flow-btn f-32"},[t._v("确认提交")])],1)],1)],1)],1):t._e()},s=[]}}]);